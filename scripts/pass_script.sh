#!/bin/bash


${LLVM_DIR}/bin/llvm-link $(find ./build/CMakeFiles/ORB_SLAM3.dir/src/ -name '*.o') -o orb-slam3-src.ll 


${LLVM_DIR}/bin/opt  -f -enable-new-pm=0 -load /home/cspl/Shore-user/Shore-GraphBuilder/Release-build/tools/Shore-Pass/TimingInstrumenter/libPassTimingInstrumenter.so -TimingInstrumenter orb-slam3-src.ll -o /tmp/output.ll

mv /tmp/output.ll ./build/orb-slam3-src.ll

cd build

/home/cspl/llvm-project/build/bin/clang++ -fPIC  -Wall   -O0 -flto -std=c++14 -O3 -DNDEBUG -march=native  -shared -Wl,-soname,libORB_SLAM3.so -o ../lib/libORB_SLAM3.so ../lib/libORB_SLAM3.so orb-slam3-src.ll  -Wl,-rpath,/home/cspl/Pangolin/build:/home/cspl/Shore-user/ORB_SLAM3/Thirdparty/DBoW2/lib:/home/cspl/Shore-user/ORB_SLAM3/Thirdparty/g2o/lib /usr/lib/x86_64-linux-gnu/libopencv_stitching.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_aruco.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_bgsegm.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_bioinspired.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_ccalib.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_dnn_objdetect.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_dnn_superres.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_dpm.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_face.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_freetype.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_fuzzy.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_hdf.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_hfs.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_img_hash.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_line_descriptor.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_quality.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_reg.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_rgbd.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_saliency.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_shape.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_stereo.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_structured_light.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_superres.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_surface_matching.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_tracking.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_videostab.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_viz.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_xobjdetect.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_xphoto.so.4.2.0 /home/cspl/Pangolin/build/libpango_glgeometry.so /home/cspl/Pangolin/build/libpango_plot.so /home/cspl/Pangolin/build/libpango_python.so /home/cspl/Pangolin/build/libpango_scene.so /home/cspl/Pangolin/build/libpango_tools.so /home/cspl/Pangolin/build/libpango_video.so ../Thirdparty/DBoW2/lib/libDBoW2.so ../Thirdparty/g2o/lib/libg2o.so -lboost_serialization -lcrypto /usr/lib/x86_64-linux-gnu/libopencv_highgui.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_datasets.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_plot.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_text.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_dnn.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_ml.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_phase_unwrapping.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_optflow.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_ximgproc.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_video.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_videoio.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_imgcodecs.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_objdetect.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_calib3d.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_features2d.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_flann.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_photo.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_imgproc.so.4.2.0 /usr/lib/x86_64-linux-gnu/libopencv_core.so.4.2.0 /home/cspl/Pangolin/build/libpango_geometry.so /home/cspl/Pangolin/build/libtinyobj.so /home/cspl/Pangolin/build/libpango_display.so /home/cspl/Pangolin/build/libpango_vars.so /home/cspl/Pangolin/build/libpango_windowing.so /home/cspl/Pangolin/build/libpango_opengl.so -lGLEW -lOpenGL -lGLX -lGLU /home/cspl/Pangolin/build/libpango_image.so /home/cspl/Pangolin/build/libpango_packetstream.so /home/cspl/Pangolin/build/libpango_core.so -lrt -lpthread